<!-- 1. 定义模版和插槽 -->
<template id="my-element-template">
   <style>
      :host {
         display: block;
         width: 200px;
         height: 100px;
         background: lightgray;
         border: 1px solid black;
         margin: 10px;
      }

      /* 直接作用于模板中的 h2，而不是宿主元素 */
      h2.title {
         color: red;
      }

      :host(.highlight) {
         border-color: orange;
      }
   </style>
   <h2 class="title">这是标题</h2>
   <slot></slot>
</template>
<script>
   //2. 创建自定义元素
   class MyElement extends HTMLElement {
      constructor() {
         super();
         // 3. 创建 shadow DOM
         const shadowRoot = this.attachShadow({ mode: 'open' });

         const template = document.getElementById('my-element-template');
         const templateContent = template.content;

         // 4. 插入模版到 shadow DOM
         shadowRoot.appendChild(templateContent.cloneNode(true));
      }


      set title(value) {
         this.setAttribute('title', value);
         if (this.shadowRoot) {
            const h2 = this.shadowRoot.querySelector('h2');
            if (h2) {
               h2.textContent = value;
            }
         }
      }

      // 5. 绑定挂载回调
      connectedCallback() {
         if (this.hasAttribute('title')) {
            const title = this.getAttribute('title');
            this.title = title;
         }
      }

   }

   // 6. 全局自定义元素
   customElements.define('my-element', MyElement);
</script>
<!-- 7. 使用自定义元素 -->
<my-element class="highlight" title="自定义标题">
   <p>这是一个插槽</p>
</my-element>

<!-- 8. 使用自定义元素 -->
<my-element title="自定义标题">
   <p>这是一个插槽</p>
</my-element>