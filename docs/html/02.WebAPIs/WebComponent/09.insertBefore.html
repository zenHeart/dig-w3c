<script>
  // 假设浏览器支持 connectedMoveCallback
  class MyHighlight extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: "open" });
    }

    connectedCallback() {
      console.log("MyHighlight 元素已被插入");
      this.render("已插入文档");
    }
    disconnectedCallback() {
      console.log("MyHighlight 元素已被移除");
    }
    connectedMoveCallback() {
      console.log("MyHighlight 元素已被移动");
    }

    render(status) {
      const content = this.getAttribute("content") || "默认内容";
      this.shadowRoot.innerHTML = `<strong style="color: red;">${content}（${status}）</strong>`;
    }
  }
  customElements.define("my-highlight", MyHighlight);

  // 演示动态移动组件
  setTimeout(() => {
    const container = document.querySelector("#container");
    const el = document.querySelector("my-highlight");
    const item = document.querySelector("#item");
    // 注意 interBefore 方法是卸载元素后再插入元素，所以会触发 disconnectedCallback 和 connectedCallback
    container.insertBefore(el, item);
  }, 2000);
</script>

<div id="container">
  <div id="item">test</div>
  <my-highlight content="hello world"></my-highlight>
</div>
